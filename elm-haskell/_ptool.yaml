description: Simple Elm frontend with Haskell/Servant backend

template-values:
  elm_copyright: |
    --------------------------------------------------
    -- Copyright (C) 2017, All rights reserved.
    --------------------------------------------------
  hs_copyright: |
    --------------------------------------------------
    -- Copyright (C) 2017, All rights reserved.
    --------------------------------------------------
  app_dependencies:
    - servant
    - time
  test_dependencies: []

template-filters:
  module_name: "lambda ctx, s: \"\".join(map(lambda s: s.title(), ctx.tokenize(s)))"

template-globals:
  module_name: "{{ project_name | module_name }}"

files:
- README.md
- path: ../_shared/LICENSE
  output-path: LICENSE
- path: ../_shared/elm/.gitignore
  output-path: frontend/.gitignore
- path: ../_shared/elm/elm-package.json
  output-path: frontend/elm-package.json
- path: ../_shared/elm/package.json
  output-path: frontend/package.json
- path: ../_shared/elm/src/App.elm
  output-path: frontend/src/App.elm
- path: ../_shared/elm/src/favicon.ico
  output-path: frontend/src/favicon.ico
  preprocess: false
- path: ../_shared/elm/src/index.html
  output-path: frontend/src/index.html
- path: ../_shared/elm/src/index.js
  output-path: frontend/src/index.js
- path: ../_shared/elm/src/logo.svg
  output-path: frontend/src/logo.svg
  preprocess: false
- path: ../_shared/elm/src/main.css
  output-path: frontend/src/main.css
- path: ../_shared/elm/tests/Tests.elm
  output-path: frontend/tests/Tests.elm
- path: ../_shared/elm/tests/elm-package.json
  output-path: frontend/tests/elm-package.json
- path: ../_shared/haskell/.gitignore
  output-path: backend/.gitignore
- path: ../_shared/haskell/stack.yaml
  output-path: backend/stack.yaml
- path: ../_shared/haskell/Setup.hs
  output-path: backend/Setup.hs
- path: ../_shared/haskell/project.cabal
  output-path: backend/{{project_name}}.cabal
- path: ../_shared/haskell/app/Main.hs
  output-path: backend/app/Main.hs
- path: ../_shared/haskell/lib/Project.hs
  output-path: backend/lib/{{module_name}}.hs
- path: ../_shared/haskell/test/Spec.hs
  output-path: backend/test/Spec.hs
- path: ../_shared/haskell/test/ProjectSpec.hs
  output-path: backend/test/{{module_name}}Spec.hs

commands:
- git init
- git remote add origin {{ project_name | git_url(git_server) }}
- git config user.name "{{author}}"
- git config user.email "{{author_email}}"
- git add .
- git-symlink:
    source-path: LICENSE
    target-path: backend/LICENSE
- git-symlink:
    source-path: README.md
    target-path: backend/README.md
- cd frontend && npm install